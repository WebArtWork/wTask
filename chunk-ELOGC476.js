import{a as w}from"./chunk-4W7J6IKT.js";import{a as C}from"./chunk-NEQFZBYG.js";import{e as g}from"./chunk-UIH4WJTY.js";import{$a as _,E as n,F as m,G as p,L as d,Pa as h,R as f,Wa as u,gb as j,m as l,nb as k,pb as v}from"./chunk-CBKWH2IW.js";import"./chunk-GAL4ENT6.js";var S=(()=>{class o{get rows(){return this._taskprojectService.taskprojects}constructor(i,r,t,s,c){this._translate=i,this._taskprojectService=r,this._alert=t,this._form=s,this._core=c,this.columns=["name","description"],this.form=this._form.getForm("taskproject",w),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(e,a)=>{this._preCreate(e),this._taskprojectService.create(e),a()}})},update:e=>{this._form.modal(this.form,[],e).then(a=>{this._core.copy(a,e),this._taskprojectService.update(e)})},delete:e=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this taskproject?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._taskprojectService.delete(e)}}]})},buttons:[{icon:"task",hrefFunc:e=>"/tasks/"+e._id},{icon:"publish",hrefFunc:e=>"/releases/"+e._id},{icon:"track_changes",hrefFunc:e=>"/sprints/"+e._id},{icon:"label",hrefFunc:e=>"/tags/"+e._id},{icon:"checklist",hrefFunc:e=>"/stories/"+e._id},{icon:"view_agenda",hrefFunc:e=>"/pages/"+e._id},{icon:"widgets",hrefFunc:e=>"/elements/"+e._id},{icon:"apps",hrefFunc:e=>"/modules/"+e._id},{icon:"cloud_download",click:e=>{this._form.modalUnique("taskproject","url",e)}}],headerButtons:[{icon:"playlist_add",click:this._bulkManagement(),class:"playlist"},{icon:"edit_note",click:this._bulkManagement(!1),class:"edit"}]}}_bulkManagement(i=!0){return()=>{this._form.modalDocs(i?[]:this.rows).then(r=>{if(i)for(let t of r)this._preCreate(t),this._taskprojectService.create(t);else{for(let t of this.rows)r.find(s=>s._id===t._id)||this._taskprojectService.delete(t);for(let t of r){let s=this.rows.find(c=>c._id===t._id);s?(this._core.copy(t,s),this._taskprojectService.update(s)):(this._preCreate(t),this._taskprojectService.create(t))}}})}}_preCreate(i){i.__created}static{this.\u0275fac=function(r){return new(r||o)(n(j),n(C),n(_),n(v),n(u))}}static{this.\u0275cmp=m({type:o,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","Projects",3,"columns","config","rows"]],template:function(r,t){r&1&&f(0,"wtable",0),r&2&&d("columns",t.columns)("config",t.config)("rows",t.rows)},dependencies:[k],encapsulation:2})}}return o})();var y=[{path:"",component:S}],B=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=p({type:o})}static{this.\u0275inj=l({imports:[h.forChild(y),g]})}}return o})();export{B as ProjectsModule};
