import{a as k}from"./chunk-2EWNXXZ2.js";import{a as u}from"./chunk-7LGE3TYT.js";import{e as $}from"./chunk-UIH4WJTY.js";import{$a as A,B as a,E as o,F as p,G as F,J as O,Ja as x,L as l,N as f,P as r,Pa as P,Q as s,R as g,U as E,V as c,W as I,Wa as V,ca as d,da as D,gb as R,ib as B,ja as q,m as y,pb as _,q as j,r as b,s as M,u as h,vb as v,wb as Y,xa as N}from"./chunk-CBKWH2IW.js";import{g as w}from"./chunk-GAL4ENT6.js";var G=(()=>{class i{constructor(e,t,n,m,C){this._taskService=e,this._form=t,this._core=n,this._alert=m,this._translate=C,this.form=this._form.getForm("task",k),this.load=new h}update(){this._form.modal(this.form,[],this.task).then(e=>{this._core.copy(e,this.task),this._taskService.update(this.task)})}delete(){this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this task?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>w(this,null,function*(){this._taskService.delete(this.task).subscribe(()=>{this.load.emit()})})}]})}static{this.\u0275fac=function(t){return new(t||i)(o(u),o(_),o(V),o(A),o(R))}}static{this.\u0275cmp=p({type:i,selectors:[["app-task"]],inputs:{task:"task"},outputs:{load:"load"},standalone:!1,decls:6,vars:1,consts:[[1,"material-icons",3,"click"]],template:function(t,n){t&1&&(r(0,"h3"),d(1),s(),r(2,"span",0),c("click",function(){return n.update()}),d(3,"edit"),s(),r(4,"span",0),c("click",function(){return n.delete()}),d(5,"delete"),s()),t&2&&(a(),D(n.task.name))},encapsulation:2})}}return i})();var U=()=>["cat","dog"];function W(i,J){if(i&1){let e=E();r(0,"div",12)(1,"app-task",13),c("load",function(){b(e);let n=I();return M(n.load())}),s()()}if(i&2){let e=J.$implicit;a(),l("task",e)}}var T=(()=>{class i{constructor(e,t,n){this._taskService=e,this._route=t,this._form=n,this.tasks=[],this.project_id="",this.isMenuOpen=!0,this.form=this._form.getForm("task",k),this._route.paramMap.subscribe(m=>{this.project_id=m.get("project_id")||"",this.load()})}create(){this._form.modal(this.form,{label:"Create",click:(e,t)=>{t(),this._preCreate(e),this._taskService.create(e).subscribe(()=>{this.load()})}})}load(){this._taskService.get({page:1,query:this._query()}).subscribe(e=>{this.tasks.splice(0,this.tasks.length),this.tasks.push(...e)})}_query(){let e="";return this.project_id&&(e+=(e?"&":"")+"project="+this.project_id),e}_preCreate(e){e.__created=!1,this.project_id&&(e.project=this.project_id)}static{this.\u0275fac=function(t){return new(t||i)(o(u),o(x),o(_))}}static{this.\u0275cmp=p({type:i,selectors:[["ng-component"]],standalone:!1,decls:13,vars:11,consts:[[1,"documents-wrapper"],[1,"documents-container"],[1,"documents-list"],[1,"burger-wrap",3,"click"],[1,"burger"],[1,"documents-sidebar"],[1,"documents-sidebar-content"],[3,"click"],[3,"items"],[1,"documents-main"],[1,"documents-main-content"],["class","documents-main-row",4,"ngFor","ngForOf"],[1,"documents-main-row"],[3,"load","task"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c("click",function(){return n.isMenuOpen=!n.isMenuOpen}),g(4,"div",4),s(),r(5,"div",5)(6,"div",6)(7,"wbutton",7),c("click",function(){return n.create()}),d(8,"Create"),s(),g(9,"wselect",8),s()(),r(10,"div",9)(11,"div",10),O(12,W,2,1,"div",11),s()()()()()),t&2&&(f("documents-wrapper--open",n.isMenuOpen),a(3),f("burger-wrap--open",n.isMenuOpen),a(),f("burger--close",n.isMenuOpen),a(),f("documents-sidebar--open",n.isMenuOpen),a(4),l("items",q(10,U)),a(3),l("ngForOf",n.tasks))},dependencies:[v,N,B,G],encapsulation:2})}}return i})();var H=(()=>{class i{get items(){return this._taskService.getDocs()}constructor(e){this._taskService=e,this.wChange=new h}ngOnChanges(e){e.value&&!e.value.firstChange&&(this.value=e.value.currentValue)}static{this.\u0275fac=function(t){return new(t||i)(o(u))}}static{this.\u0275cmp=p({type:i,selectors:[["task-selector"]],inputs:{value:"value"},outputs:{wChange:"wChange"},features:[j],decls:1,vars:2,consts:[["placeholder","Select task",3,"modelChange","select","items"]],template:function(t,n){t&1&&(r(0,"wselect",0),c("modelChange",function(C){return n.wChange.emit(C)}),s()),t&2&&l("select",n.value)("items",n.items)},dependencies:[Y,v],encapsulation:2})}}return i})();var X=[{path:"",component:T},{path:":project_id",component:T}],ye=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=F({type:i})}static{this.\u0275inj=y({imports:[P.forChild(X),$,H]})}}return i})();export{ye as TasksModule};
